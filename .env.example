# Law Firm Extraction System Configuration
# Copy this file to .env and update with your actual values

# ==========================================
# Database Configuration
# ==========================================

# Choose database type: 'supabase' or 'postgres'
DATABASE_TYPE=supabase

# Supabase Configuration (if DATABASE_TYPE=supabase)
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_KEY=your_anon_key_here

# Local PostgreSQL Configuration (if DATABASE_TYPE=postgres)
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=law_firm_extraction
POSTGRES_USER=extraction_user
POSTGRES_PASSWORD=your_secure_password_here

# ==========================================
# Ollama Configuration
# ==========================================

OLLAMA_BASE_URL=http://localhost:11434
EXTRACTION_MODEL=llama3.1:8b
EMBEDDING_MODEL=nomic-embed-text

# ==========================================
# Processing Configuration
# ==========================================

# LLM Settings
EXTRACTION_TEMPERATURE=0.0
EXTRACTION_SEED=42
EXTRACTION_NUM_CTX=8192
EXTRACTION_MAX_RETRIES=3

# Chunking Settings
EXTRACTION_CHUNK_SIZE=5000
EXTRACTION_CHUNK_OVERLAP=500

# Batch Processing
EXTRACTION_BATCH_SIZE=5
PARALLEL_WORKERS=1

# ==========================================
# GPU Optimizations (RTX 3090 24GB)
# ==========================================

# Uncomment and adjust these for GPU optimization
# EXTRACTION_CHUNK_SIZE=8000
# EXTRACTION_NUM_CTX=16384
# EXTRACTION_BATCH_SIZE=10
# OLLAMA_NUM_GPU=1
# OLLAMA_GPU_LAYERS=35

# ==========================================
# Embedding Configuration
# ==========================================

EMBEDDING_BATCH_SIZE=50
EMBEDDING_MAX_RETRIES=3
# For GPU optimization, increase to 100-200
# EMBEDDING_BATCH_SIZE=100

# ==========================================
# Vector Store Configuration
# ==========================================

VECTOR_STORE_SIMILARITY_THRESHOLD=0.7
VECTOR_STORE_TOP_K=10
VECTOR_STORE_MAX_RESULTS=100

# ==========================================
# Storage Configuration
# ==========================================

# Supabase Storage
SUPABASE_STORAGE_BUCKET=law-firm-websites
SUPABASE_STORAGE_BASE_PATH=markdown

# Local Storage
LOCAL_STORAGE_PATH=data/markdown

# ==========================================
# Logging Configuration
# ==========================================

LOG_LEVEL=INFO
LOG_FILE=logs/extraction.log
LOG_MAX_SIZE=10485760  # 10MB
LOG_BACKUP_COUNT=5

# ==========================================
# API Configuration (Optional)
# ==========================================

# If using API endpoints
API_HOST=0.0.0.0
API_PORT=8000
API_KEY=your_api_key_here
API_RATE_LIMIT=100

# ==========================================
# Development/Debug Settings
# ==========================================

# Environment: 'development', 'staging', or 'production'
ENVIRONMENT=development

# Debug mode (verbose logging)
DEBUG=false

# Dry run (simulate without making changes)
DRY_RUN=false

# ==========================================
# Performance Monitoring (Optional)
# ==========================================

# Enable performance metrics
ENABLE_METRICS=true
METRICS_PORT=9090

# Enable profiling
ENABLE_PROFILING=false
PROFILE_OUTPUT_DIR=profiles

# ==========================================
# Security Settings
# ==========================================

# Enable SSL for database connections
DATABASE_SSL_MODE=prefer  # disable, allow, prefer, require

# Request timeout in seconds
REQUEST_TIMEOUT=300

# Maximum file size for processing (in bytes)
MAX_FILE_SIZE=52428800  # 50MB

# ==========================================
# Cache Configuration (Optional)
# ==========================================

# Enable caching for embeddings
ENABLE_CACHE=true
CACHE_TTL=3600  # 1 hour

# Redis cache (if using)
# REDIS_URL=redis://localhost:6379
# REDIS_PASSWORD=your_redis_password

# ==========================================
# Notes
# ==========================================

# 1. Never commit this file with actual credentials
# 2. Use strong passwords for database connections
# 3. Keep API keys secure and rotate regularly
# 4. For production, use environment-specific configs
# 5. Monitor resource usage and adjust batch sizes accordingly
# 6. GPU settings require CUDA 11.8+ and compatible drivers